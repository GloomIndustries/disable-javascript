function domContentLoaded(){var e=[{label:'Default state',name:'default_state',type:'radio',options:[{label:'JS on',value:'on'},{label:'JS off',value:'off'}]},{label:'Disable behavior',name:'disable_behavior',type:'radio',options:[{label:'By domain',value:'domain'},{label:'By tab',value:'tab'}]}],t='setting-';function a(e){var a=document.getElementById('domain-list--tbody'),n='',l=!1,o=[],r=document.getElementById('search');for(var d in e)d.startsWith(t)||(o.push(d),l=!0);for(var i=o.length-1;i>=0;i--){d=o[i];var s=new Date(e[d]);n+='<tr>',n+='<td>'+d+'</td>',n+='<td>'+s.toLocaleDateString()+' '+s.toLocaleTimeString()+'</td>',n+='</tr>'}0===n.length?(n+='<tr>',n+='<td class="empty" colspan="2">You have not added any domains to your white-/blacklist yet.</td>',n+='</tr>',r.disabled=!0):r.disabled=!1,a.innerHTML=n;var c=a.querySelectorAll('tr');for(i=0;i<c.length;i++)c[i].addEventListener('click',function(){if(this.classList.contains('active'))this.classList.remove('active');else{for(var e=a.querySelectorAll('tr.active'),t=0;t<e.length;t++)e[t].classList.remove('active');this.classList.add('active'),document.getElementById('remove').disabled=!1}});l&&(document.getElementById('remove-all').disabled=!1)}function n(){document.getElementById('remove').disabled=!0,document.getElementById('remove-all').disabled=!0,browser.storage.local.get(t+'disable_behavior').then(function(e){if('domain'===e[t+'disable_behavior']){document.body.classList.remove('disable-behavior--tab');browser.storage.local.get().then(a)}else document.body.classList.add('disable-behavior--tab')})}function l(){var e={};e[t+this.name]=this.value,browser.storage.local.set(e),'default_state'===this.name?browser.runtime.sendMessage({type:'default_state',default_state:this.value}):'disable_behavior'===this.name&&(browser.runtime.sendMessage({type:'disable_behavior',default_state:this.value}),n())}function o(a){for(var n='',o=0;o<e.length;o++){var r=e[o];n+='<tr>',n+='<td><label>'+r.label+'</label></td>',n+='<td>';for(var d=0;d<e[o].options.length;d++){var i=r.options[d],s=r.name+'-'+i.value,c='';a[t+r.name]===i.value&&(c=' checked="checked"'),n+='<input type="'+r.type+'" name="'+r.name+'" id="'+s+'" value="'+i.value+'"'+c+' />',n+='<label for="'+s+'">'+i.label+'</label>'}n+='</td>',n+='</tr>'}document.getElementById('settings').innerHTML=n;var u=document.querySelectorAll('input[type=radio]');for(o=0;o<u.length;o++)u[o].addEventListener('click',l)}for(var r=document.querySelectorAll('input[type=button]'),d=0;d<r.length;d++)r[d].disabled=!0;!function(){for(var a=[],n=0;n<e.length;n++)a.push(t+e[n].name);browser.storage.local.get(a).then(o)}(),n(),document.getElementById('remove').addEventListener('click',function(){for(var e=document.querySelectorAll('#domain-list--tbody tr.active'),t=0;t<e.length;t++){var a=e[t].childNodes[0].innerHTML;browser.storage.local.remove(a).then(n)}}),document.getElementById('remove-all').addEventListener('click',function(){if(confirm('Are you sure to clear your domain list?')){for(var a={},l=0;l<e.length;l++){var o=e[l].name,r=document.querySelector('input[name="'+o+'"]:checked').value;a[t+o]=r}browser.storage.local.clear().then(function(){browser.storage.local.set(a).then(function(){n()})})}}),document.getElementById('search').value='',document.getElementById('search').addEventListener('keyup',function(){for(var e=document.getElementById('domain-list--tbody').getElementsByTagName('tr'),t=0;t<e.length;t++){var a=e[t].getElementsByTagName('td')[0];a&&(a.innerHTML.toUpperCase().indexOf(this.value.toUpperCase())>-1?e[t].style.display='':e[t].style.display='none')}})}document.addEventListener('DOMContentLoaded',domContentLoaded);